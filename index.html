<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Login | Teachelp</title>
      <link rel="stylesheet" href="css/login.css" />
   </head>
   <body>
      <nav
         class="navbar navbar-expand-lg p-1"
         style="background-color: var(--primary-color)"
      >
         <div class="container-fluid mx-5">
            <a class="navbar-brand me-5" href="#">
               <img src="img/smk_logo.png" alt="logo" height="50" />
            </a>
            <button
               class="navbar-toggler"
               type="button"
               data-bs-toggle="collapse"
               data-bs-target="#navbarNavAltMarkup"
               aria-controls="navbarNavAltMarkup"
               aria-expanded="false"
               aria-label="Toggle navigation"
            >
               <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
               <div class="navbar-nav ms-auto">
                  <a
                     class="nav-link active"
                     aria-current="page"
                     target="_blank"
                     href="form.html"
                     >Form</a
                  >
      <div class="container">
         <div class="login form">
            <header>Login</header>
            <form id="loginForm">
               <div class="mb-3">
                  <label for="email" class="form-label">Email</label>
                  <input
                     type="email"
                     id="email"
                     name="email"
                     class="input-box"
                     required
                  />
               </div>
               <div class="mb-3">
                  <label for="password" class="form-label">Password</label>
                  <input
                     type="password"
                     id="password"
                     name="password"
                     class="input-box"
                     required
                  />
               </div>
               <input type="submit" class="btn-login" value="Login"></input>
            </form>
         </div>
      </nav>

      <section class="wrapper">
         <div class="container">
            <div class="grid-cols-2">
               <div class="grid-item-1">
                  <h1 class="main-heading">
                     Welcome to <span>Teachelp</span>
                     <br />
                     Optimize your performance.
                  </h1>
                  <p class="info-text">
                     Teachelp dibuat dengan tujuan membantu guru menginput data
                     dan memudahkan guru untuk melihat kinerjanya
                  </p>

                  <div class="btn_wrapper">
                     <a
                        href="form.html"
                        target="_blank"
                        class="btn get_started_btn"
                     >
                        Get Started <i class="ri-arrow-right-line"></i>
                     </a>

                     <a
                        href="https://docs.google.com/spreadsheets/d/11KTpv50bgIehaUw_H2P6JN76J1_eizzwJwIzZZsfeN8/edit#gid=0"
                        target="_blank"
                        class="btn see_data_btn"
                        >See Data</a
                     >
                  </div>
               </div>
               <div class="grid-item-2">
                  <div class="team_img_wrapper">
                     <img src="img/home-image.png" alt="home-image" />
                  </div>
               </div>
            </div>
         </div>
      </section>
      </div>
      <script>
         document.getElementById("loginForm").addEventListener("submit", function (event) {
            event.preventDefault();
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;
            fetch("https://script.google.com/macros/s/AKfycbyGm8Ul8XbnudOgbv33tGyNc5c6Q55T2GmsE9xJHzDjPDEjKoEblSi64b6hzBttun7jLw/exec", {
               method: "POST",
               headers: {
                  "Content-Type": "application/x-www-form-urlencoded",
               },
               body: `email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}&action=login`,
            })
            .then((response) => response.json())
            .then((data) => {
               if (data.status === "success") {
                  localStorage.setItem("isLoggedIn", "true");
                  alert(data.message);
                  window.location.replace("landing.html");
               } else {
                  alert(data.message);
               }
            })
            .catch((error) => console.error("Error:", error));
         });
      </script>
   </body>
</html>
